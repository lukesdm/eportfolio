<link
rel="stylesheet"
href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
/>
<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
<script src="https://unpkg.com/jquery@3.3.1/dist/jquery.min.js"></script>
<style>
.map-container {
  height: 512px;
}
</style>
<script>
customElements.define(
  "leaflet-map",
  class extends HTMLElement {
    connectedCallback() {
      const template = document.getElementById("map-template");
      const node = template.content.cloneNode(true);
      node.querySelector(".map-container").id =
        this.getAttribute("map-id");
      this.appendChild(node);
    }
  }
);
</script>
<template id="map-template">
<div>
  <div id="map" class="map-container"></div>
  <slot name="map-script"></slot>
</div>
</template>
